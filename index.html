<!DOCTYPE html>
<html lang="en-US">
<head>
	<title>Experimenting With WebGL</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<script type="text/javascript" src="demo/jquery-1.8.2.min.js"></script>
	<!--script type="text/javascript" src="/~teammco/scripts/animatebg.js"></script-->
	
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-37662370-2', 'utexas.edu');
  ga('send', 'pageview');

</script>

<!-- Styling for the "WebGL not available" message -->
<style>
#no_webgl_message_area {
	display: none;
}

#no_webgl_message {
	border-top: 1px solid black;
	border-bottom: 1px solid black;
	padding-top: 5px;
	padding-bottom: 15px;
}
#loading_text {
	position: absolute;
	top: 210px;
	left: 310px;
	text-align: center;
	font-weight: bold;
	color: black;
}
</style>


<!-- WebGL Demo Scripts -->
<script type="text/javascript" src="demo/includes/gl-matrix-min.js"></script>
<script type="text/javascript" src="demo/includes/webgl-utils.js"></script>
<script type="text/javascript" src="demo/scripts/appClass.js"></script>
<script type="text/javascript" src="demo/scripts/lights.js"></script>
<script type="text/javascript" src="demo/scripts/textureObject.js"></script>
<script type="text/javascript" src="demo/scripts/graphicsObject.js"></script>
<script type="text/javascript" src="demo/scripts/dataLoader.js"></script>
<script type="text/javascript" src="demo/scripts/main.js"></script>
<script type="text/javascript" src="demo/app/application.js"></script>
<!-- WegBL Demo Fragment Shader -->
<script id="shader-fs" type="x-shader/x-fragment">
	precision mediump float;
	
	varying vec2 vTextureCoord;
	varying vec3 vLightWeighting;
	
	uniform float uAlpha;
	
	uniform sampler2D uSampler;
	
	void main(void){
		vec4 textureColor = texture2D(uSampler, vec2(vTextureCoord.s, vTextureCoord.t));
		gl_FragColor = vec4(textureColor.rgb * vLightWeighting, textureColor.a * uAlpha);
	}
</script>
<!-- WegBL Demo Vertex Shader -->
<script id="shader-vs" type="x-shader/x-vertex">
	attribute vec3 aVertexPosition;
	attribute vec3 aVertexNormal;
	attribute vec2 aTextureCoord;
	
	uniform mat4 uMVMatrix;
	uniform mat4 uPMatrix;
	uniform mat3 uNMatrix;
	
	uniform vec3 uAmbientColor;
	
	uniform vec3 uLightingDirection;
	uniform vec3 uDirectionalColor;
	
	uniform bool uUseLighting;
	
	varying vec2 vTextureCoord;
	varying vec3 vLightWeighting;
	
	void main(void){
		gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
		vTextureCoord = aTextureCoord;
		
		if(!uUseLighting) {
			vLightWeighting = vec3(1.0, 1.0, 1.0);
		} else {
			vec3 transformedNormal = uNMatrix * aVertexNormal;
			float directionalLightWeighting = max(dot(transformedNormal, uLightingDirection), 0.0);
			vLightWeighting = uAmbientColor + uDirectionalColor * directionalLightWeighting;
		}
	}
</script>


<!-- Script to display message if WebGL is not available -->
<script type="text/javascript">
$(document).ready(function(){
	$("#day_sel").attr('checked', 'checked');
	if(!window.WebGLRenderingContext){
		$("#no_webgl_message_area").show();
		$("#demo_images").show();
	}
	else{
		$("#demo_content").show();
		var retval = main();
		if(retval != 0){
			$("#screen").hide();
			if(retval == 2){ // GL loading error
				var browserEnableText = "";
				if($.browser.opera){
					browserEnableText = "<p><i><b>" +
						"In Opera, you can enable WebGL by typing " +
						"</i>opera:config<i> into the address bar, and search " +
						"for \"</i>Enable WebGL<i>\". " +
						"Set the value to </i>1.</b></p>";
				}
				$("#demo_content").html("<p><b>" +
					"Oops! There was a problem initializing WebGL. " +
					"Your web browser appears to be WebGL compatible, but perhaps " +
					"it is not enabled, or your video card does not support WebGL. " +
					"This demo should work on newer computers with the latest versions of " +
					"Mozilla Firefox and Google Chrome." +
					"</b></p>" + browserEnableText +
					"<p>Screenshots have been displayed in place of the demo.</p>"
				);
			}
			else if(retval == 3){ // shader loading error
				$("#demo_content").html("<p><b>" +
					"Oops! There was an unexpected problem with loading the shaders. " +
					"This demo should work correctly in " +
					"the latest versions of Mozilla Firefox and Google Chrome." +
					"</b></p>" +
					"<p>Screenshots have been displayed in place of the demo.</p>"
				);
			}
			else { // some other error
				$("#demo_content").html("<p><b>" +
					"Oops! Something went wrong, but it seems that WebGL and the " +
					"shaders loaded correctly. I will look into the issue as soon " +
					"as I can. Sorry about that. " +
					"This demo should work in the latest versions of " +
					"Mozilla Firefox and Google Chrome." +
					"</b></p>" +
					"<p>Screenshots have been displayed in place of the demo.</p>"
				);
			}
			$("#demo_images").show();
		}
	}
});
</script>



</head>


<body>

<div id="container">

	<div id=header></div>
	
	<div id="content">

<div id="demo_content" style="display:none; position:relative;">
<p><canvas id="screen" width="800" height="500"
	style="background-color:white; border:4px solid black;"></canvas></p>
<p><div id="loading_text" style="display:none;">
		<center>
			<font size=6>Loading Model Data...</font><br />
			<font size=5>This may take a minute.</font>
		</center>
	</div></p>

<p>
	Use the <b>W-A-S-D</b> keys or the <b>arrow keys</b> to move, and use the
	<b>mouse</b> (left-click and drag) to look around.
	<br />
	You can also press <b>SPACE</b> to go up, and <b>X</b> to go down. Press
	<b>ESC</b> to return to the initial position.
	<!--br /><br />
	<form><input type=checkbox checked="yes">
	Allow my browser and OS information to be collected</form>
	<small>
		This application does automatic error logging. If an issue is detected, the error number
		will be logged into a database along with your browser version and operating system.
		I will use this information to try to debug and fix the issue as soon as possible.
	</small-->
</p>
<p>
	Time of day (lighting):
	&nbsp;
	<input type="radio" name="time_sel" onclick="App.setTimeOfDay('day');"
		id="day_sel" CHECKED>Day
	&nbsp;
	<input type="radio" name="time_sel" onclick="App.setTimeOfDay('sunset');">Sunset
	&nbsp;
	<input type="radio" name="time_sel" onclick="App.setTimeOfDay('moon');">Moonlight
	&nbsp;
	<input type="radio" name="time_sel" onclick="App.setTimeOfDay('night');">Night (darkness)
</p>
<p>
	Hold down <b>1</b> to make the monkey head spin left,
	and <b>2</b> to make it spin right.
</p>
</div><br />
</body>

</html>
